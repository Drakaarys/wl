<% layout("/layouts/boilerplate") %>

<style>
    h1{
        text-align:center;
        text-decoration: underline;
        color: rgb(41, 41, 40);
        margin-top: 2rem;
    }

    /* FILTER BAR */
    .filters{
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        padding: 1rem 2rem;
    }

    .filter{
        text-align: center;
        opacity: .7;
        transition: 0.2s ease;
        cursor: pointer;
    }

    .filter:hover{
        opacity: 1;
        transform: translateY(-3px);
    }

    .filter i{
        font-size: 1rem;
    }

    a{
        text-decoration: none;
        color: black;
    }

    .tax-switch{
        margin-left: auto;
        margin-right: 2rem;
        display: flex;
        align-items: center;
    }

    .hidden{
        display: none;
    }

    /* CARD DESIGN */
    .listing-card{
        border: none;
        border-radius: 15px;
        overflow: hidden;
        transition: 0.25s ease;
        box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }

    .listing-card:hover{
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.12);
    }

    .listing-card img{
        height: 18rem;
        object-fit: cover;
    }

    .card-title{
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: .4rem;
    }

    .price-text{
        font-size: 1.1rem;
        font-weight: 600;
        color: #c62828;
        margin-bottom: .2rem;
    }

    .category-text{
        font-size: .9rem;
        opacity: .7;
    }
</style>

<body>
    
    <!-- FILTERS BAR -->
    <div class="filters">

        <a href="/listings/category/Trending">
            <div class="filter">
                <i class="fa-solid fa-fire-flame-curved"></i>
                <p>Trending</p>
            </div>
        </a>
        <br>
        <br>

        <a href="/listings/category/Hotel">
            <div class="filter">
                <i class="fa-solid fa-hotel"></i>
                <p>Hotels</p>
            </div>
        </a>

        <a href="/listings/category/Mountain">
            <div class="filter">
                <i class="fa-solid fa-mountain-sun"></i>
                <p>Mountains</p>
            </div>
        </a>

        <a href="/listings/category/Beach">
            <div class="filter">
                <i class="fa-solid fa-umbrella-beach"></i>
                <p>Beach</p>
            </div>
        </a>

        <a href="/listings/category/Iconic cities">
            <div class="filter">
                <i class="fa-solid fa-city"></i>
                <p>Iconic cities</p>
            </div>
        </a>

        <a href="/listings/category/Best Views">
            <div class="filter">
                <i class="fa-solid fa-city"></i>
                <p>Best Views</p>
            </div>
        </a>

        <a href="/listings/category/Stargazing">
            <div class="filter">
                <i class="fa-regular fa-star"></i>
                <p>Stargazing</p>
            </div>
        </a>

        <a href="/listings/category/Snow">
            <div class="filter">
                <i class="fa-solid fa-snowflake"></i>
                <p>Snow</p>
            </div>
        </a>

        <a href="/listings/category/Lake">
            <div class="filter">
                <i class="fa-solid fa-water"></i>
                <p>Lakes</p>
            </div>
        </a>

        <a href="/listings/category/Cloud">
            <div class="filter">
                <i class="fa-regular fa-cloud"></i>
                <p>Clouds</p>
            </div>
        </a>

        <a href="/listings/category/World">
            <div class="filter">
                <i class="fa-solid fa-globe"></i>
                <p>World</p>
            </div>
        </a>

        <a href="/listings/category/Farm">
            <div class="filter">
                <i class="fa-solid fa-cow"></i>
                <p>Farms</p>
            </div>
        </a>

        <div class="tax-switch">
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
                <label class="form-check-label" for="switchCheckDefault">including tax</label>
            </div>
        </div>

    </div>

</body>

<h1>Listings in <%= categoryName %> category</h1>

<div class="container mt-4">
  <% if (listings.length === 0) { %>
    <p>No listings found for this category.</p>
  <% } else { %>
    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-4">

      <% listings.forEach(listing => { %>
        <div class="col">
          <a href="/listings/<%= listing.id %>" class="listing-link">

            <div class="card listing-card">
              <img src="<%= listing.image || '/images/default.jpg' %>" alt="Listing Image">

              <div class="card-body">
                <h5 class="card-title"><%= listing.title %></h5>

                <% 
                    let price = Number(listing.price);
                    let formattedPrice = price ? price.toLocaleString("en-IN") : "N/A";
                %>

                <p class="price-text">â‚¹<%= formattedPrice %></p>
                <p class="category-text">Category: <%= listing.category %></p>
              </div>

            </div>

          </a>
        </div>
      <% }) %>

    </div>
  <% } %>
</div>
